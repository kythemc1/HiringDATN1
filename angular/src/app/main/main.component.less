// ::ng-deep #abp-loader-bar {
//   display: none;
// }

// ::ng-deep .abp-loading {
//   z-index: 1108 !important;

//   .abp-spinner {
//     font-size: 2rem !important;
//   }
// }

// ::ng-deep .confirmation {
//   z-index: 1109 !important;

//   .confirmation-backdrop {
//     z-index: 1110 !important;
//   }

//   .confirmation-dialog {
//     z-index: 1111 !important;
//   }
// }

// #left-panel {
//   background-color: rgba(250, 250, 250, 1);
//   border-right: 1px solid rgba(229, 231, 235, 1);
//   width: 272px;
//   min-width: 272px;

//   #cts-banner {
//     color: rgba(217, 39, 39, 1);
//     height: 64px;
//     display: flex;
//     align-items: center;
//     justify-content: center;
//     gap: 16px;
//     text-decoration: none;
//     text-transform: uppercase;

//     #cts-logo {
//       width: 59px;
//       height: 52px;
//     }

//     #cts-title-wrapper {

//       #cts-title {
//         font-family: 'Noto Serif';
//         font-size: 20px;
//         font-weight: 700;
//       }

//       #cts-subtitle {
//         font-family: Noto Serif;
//         font-size: 9px;
//         font-weight: 500;
//       }
//     }
//   }

//   ::ng-deep #nav-menu {
//     --p-panelmenu-gap: 0;
//     --p-panelmenu-panel-background: transparent;
//     --p-panelmenu-panel-first-border-width: 0;
//     --p-panelmenu-panel-border-width: 0;
//     --p-panelmenu-panel-border-radius: 0;
//     --p-panelmenu-panel-last-border-width: 0;
//     --p-panelmenu-panel-padding: 0;
//     --p-panelmenu-item-color: rgba(9, 9, 11, 1);
//     --p-panelmenu-item-padding: 10px 20px;
//     --p-panelmenu-submenu-icon-color: rgba(9, 9, 11, 1);
//     --p-panelmenu-submenu-icon-focus-color: rgba(9, 9, 11, 1);

//     height: calc(100vh - 64px - 24px);
//     margin-top: 24px;
//     overflow-y: auto;

//     .p-panelmenu-header {
//       font-size: 14px;
//       font-weight: 600;

//       chevronrighticon,
//       chevrondownicon {
//         --p-icon-size: 10px;

//         position: absolute;
//         right: 12px;
//       }
//     }

//     .p-panelmenu-panel:has(.p-panelmenu-item-link-active) .p-panelmenu-header {
//       position: relative;

//       &::before {
//         content: '';
//         position: absolute;
//         background-color: #d92727;
//         border-top-right-radius: 4px;
//         border-bottom-right-radius: 4px;
//         width: 6px;
//         height: 100%;
//       }

//       .p-panelmenu-header-link {
//         --p-panelmenu-submenu-icon-color: rgba(217, 39, 39, 1);
//         --p-panelmenu-submenu-icon-focus-color: rgba(217, 39, 39, 1);

//         color: rgba(217, 39, 39, 1);
//       }
//     }

//     .p-panelmenu-content {

//       .p-panelmenu-item-link-active {
//         color: rgba(217, 39, 39, 1);
//       }
//     }
//   }

//   #nav-menu::-webkit-scrollbar {
//     // width: 10px;
//   }

//   #nav-menu::-webkit-scrollbar-thumb {
//     // background-color: #888;
//   }
// }

// #right-panel {
//   background-color: rgba(255, 255, 255, 1);
//   width: calc(100vw - 272px);

//   #right-panel-header {
//     border-bottom: 1px solid rgba(229, 231, 235, 1);
//     height: 64px;
//     padding-right: 16px;
//     padding-left: 16px;
//     display: flex;
//     align-items: center;
//     justify-content: space-between;

//     #app-name {
//       color: rgba(217, 39, 39, 1);
//       font-size: 14px;
//       font-weight: 500;
//       line-height: 22px;
//     }

//     #control-bars {
//       display: flex;
//       align-items: center;
//       gap: 16px;

//       > * {
//         border-radius: 4px;
//         padding: 4px 8px;
//         transition: all 0.15s ease-in-out;
//         cursor: pointer;

//         &:hover,
//         &:active {
//           background-color: var(--p-surface-200);
//         }
//       }
//     }
//   }

//   #right-panel-body {
//     height: calc(100vh - 64px);
//     overflow-y: auto;
//   }
// }

::ng-deep .confirmation {
  z-index: 1109 !important;

  .confirmation-backdrop {
    z-index: 1110 !important;
  }

  .confirmation-dialog {
    z-index: 1111 !important;
  }
}

:host ::ng-deep .p-button-text.p-button-plain#toggle-left-panel {
  color: #ffffff;
}
:host ::ng-deep #toggle-left-panel {
  border: 0 !important;
  background-color: transparent !important;
  box-shadow: none !important;
  outline: none !important;
  padding: 6px;
  border-radius: 6px;
}
:host ::ng-deep #toggle-left-panel:focus,
:host ::ng-deep #toggle-left-panel:focus-visible,
:host ::ng-deep #toggle-left-panel:active {
  box-shadow: none !important;
  outline: none !important;
}
:host ::ng-deep #toggle-left-panel .pi {
  font-size: 1.15rem;
}

#left-panel {
  background-color:#1D469E;
  border-right: 1px solid rgba(229, 231, 235, 1);
  width: 272px;
  min-width: 272px;
  transition: width .2s ease;
  display: flex;
  flex-direction: column;
  position: relative;

  #cts-banner {
    color: #ffffff;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 0 16px;
    gap: 16px;
    text-decoration: none;
    text-transform: uppercase;

    #cts-logo {
      width: 80px;
      height:80px;
    }

    #cts-title-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      line-height: 1.1;

      #cts-title {
        font-family: 'Noto Serif';
        font-size: 12px;
        font-weight: 800;
        color: #ffffff;
        letter-spacing: 0.02em;
      }

      #cts-subtitle {
        font-family: 'Noto Serif';
        font-size: 12px;
        font-weight: 800;
        color: #ffffff;
        letter-spacing: 0.02em;
      }
    }
  }

  #cts-divider {
    position: fixed;
    top: 60.5px;
    width: 272px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #1A88D8;
    font-family: Noto Serif;
    font-size: 8px;
    font-weight: 500;
    line-height: 100%;

    &:before,
    &:after {
      content: '';
      position: absolute;
      border-top: 1px solid #1A88D8;
      width: 62.5px;
    }
    &:before {
      left: 20px;
    }
    &:after {
      right: 20px;
    }
  }

  #nav-menu {
    flex: 1 1 auto;
    height: auto;
    margin-top: 24px;
    overflow-y: auto;
    color: #ffffff;

    /* Custom scrollbar for Firefox */
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.6) transparent;

    .menu-title {
      padding: 8px 20px;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.08em;
      opacity: .9;
      &.hidden { display: none; }
    }

    .menu-root {
      list-style: none;
      padding: 0;
      margin: 0;

      .menu-section {
        .menu-link {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 10px 20px;
          color: #ffffff;
          text-decoration: none;
          position: relative;
          border-radius: 6px;
          transition: background-color .15s ease-in-out;

          .menu-icon {
            font-size: 22px;
            line-height: 1;
          }
          .menu-text {
            font-size: 14px;
            font-weight: 600;
          }
          .chevron {
            margin-left: auto;
            font-size: 18px;
            opacity: .9;
          }

          &.has-children {
            cursor: pointer;
          }

          &:hover { background-color: rgba(255,255,255, .12); }
        }

        &.active > .menu-link {
          background: #ffffff;
          color: #1D469E;
          .menu-icon,
          .chevron { color: #1D469E; }
        }

        .submenu {
          list-style: none;
          padding: 6px 0 6px 0;
          margin: 0 0 4px 0;

          li {
            .submenu-link {
              display: flex;
              align-items: center;
              gap: 8px;
              padding: 8px 24px 8px 32px;
              color: #ffffff;
              text-decoration: none;
              position: relative;
              opacity: .95;

              .submenu-decorator {
                display: inline-block;
                width: 12px;
                height: 2px;
                background: #FFC107; /* accent line */
                margin-right: 4px;
              }

              &:hover { background-color: rgba(255,255,255,.08); }
            }

            &.active > .submenu-link { color: #FFC107; }
          }
        }
      }
    }
  }

  /* Custom scrollbar for WebKit browsers (Chrome/Edge/Safari) */
  #nav-menu::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  #nav-menu::-webkit-scrollbar-track {
    background: transparent;
  }

  #nav-menu::-webkit-scrollbar-thumb {
    background-color: rgba(255,255,255,0.6);
    border-radius: 8px;
    border: 2px solid transparent; /* create inset space */
    background-clip: content-box;
  }

  #nav-menu::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255,255,255,0.8);
  }

  #left-panel-footer {
    position: static;
    padding: 8px 12px;
    border-top: 1px solid rgba(229, 231, 235, 0);
    display: block;
    height: 0;
  }

  /* Toggle button floating on the right edge */
  #toggle-left-panel {
    position: absolute;
    right: -15px;
    top: 60px;
    width: 30px;
    height: 30px;
    border-radius: 8px;
    background:#1D469E !important;
    border: 1px solid rgba(254, 254, 254, 0.35) !important;
    color: #ffffff !important;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(2px);
    transition: all .2s ease;
  }
  #toggle-left-panel .pi { font-size: 1rem; }
  #toggle-left-panel:hover {
    background: #1D469E !important;
    transform: translateX(1px);
  }
}

/* When collapsed, keep button on edge of the narrow sidebar */
:host ::ng-deep .collapsed #left-panel #toggle-left-panel {
  right: -14px;
}

#right-panel {
  background-color: rgba(255, 255, 255, 1);
  width: calc(100vw - 272px);
  border: 1px solid #E6EAF2;
  border-radius: 8px;
  margin: 10px 12px;

  #right-panel-header {
    border-bottom: 1px solid rgba(229, 231, 235, 1);
    height: 64px;
    padding-right: 16px;
    padding-left: 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;

    #app-name {
      color:#1D469E;
      font-size: 14px;  
      font-weight: 500;
      line-height: 22px;
      text-transform: uppercase;
    }

    .page-title {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1 1 auto;
      min-width: 0;

      &__icon {
        width: 28px;
        height: 28px;
        border-radius: 6px;
        background: #1D469E;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: #fff;

        .material-icons {
          font-size: 18px;
          line-height: 1;
        }
      }

      &__text {
        font-family: 'Inter','Roboto',sans-serif;
        font-size: 16px;
        font-weight: 700;
        color: rgba(9,9,11,0.9);
      }
    }

    #control-bars {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-left: auto;

      > * {
        border-radius: 4px;
        padding: 4px 8px;
        transition: all 0.15s ease-in-out;
        cursor: pointer;

        &:hover,
        &:active {
          background-color: var(--p-surface-200);
        }
      }

      /* Notification bell circular button */
      .notif-btn {
        padding: 0;
        background: #fff;
        border: 1px solid #bbbdc1;
        height: 32px;
        width: 33px;
        border-radius: 9999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        cursor: pointer;
        box-shadow: none;
        &:hover,
        &:active {
          background: #fff;
        }

        .pi {
          font-size: 1rem;
          color: rgba(9, 9, 11, 0.7);
        }
        .material-icons {
          font-size: 18px;
          line-height: 1;
        }
        .notif-badge {
          position: absolute;
          top: -6px;
          right: -7px;
          background: #1D469E;
          color: #fff;
          border-radius: 9999px;
          font-size: 10px;
          line-height: 1;
          padding: 3px 5px;
          font-weight: 700;
          min-width: 18px;
          text-align: center;
        }
      }
    }
  }

  #right-panel-body {
    height: calc(100vh - 85px);
    overflow-y: auto;
    overflow-x: hidden;
  }
}

/* Collapsed state */
:host ::ng-deep .collapsed #left-panel {
  width: 72px;
  min-width: 72px;
}
:host ::ng-deep .collapsed #left-panel #cts-title-wrapper,
:host ::ng-deep .collapsed #left-panel #cts-divider,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-header .p-panelmenu-header-label,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-menuitem-text,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-menuitem-icon + span {
  display: none !important;
}
:host ::ng-deep .collapsed #left-panel #cts-banner { justify-content: center; }
:host ::ng-deep .collapsed #right-panel { width: calc(100vw - 72px); }


:host ::ng-deep .collapsed #left-panel {
  background-color: #1D469E;
  border-right-color: #1D469E;
}
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-header .p-panelmenu-header-link,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-content .p-menuitem-link {
  justify-content: center;
  padding-left: 0;
  padding-right: 0;
  height: 44px; 
}
/* Ngăn toggle bằng CSS khi collapsed (header có submenu) */
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-header .p-panelmenu-header-link {
  pointer-events: none;
}
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-header .p-menuitem-icon,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-content .p-menuitem-icon {
  color: #ffffff; 
  font-size: 1.25rem; 
}

:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-item-link-active,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-panel:has(.p-panelmenu-item-link-active) .p-panelmenu-header .p-panelmenu-header-link {
  background: #ffffff;
  border-radius: 6px;
}
/* Ẩn toàn bộ nội dung submenu khi collapsed */
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-content {
  display: none !important;
}
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-item-link-active .p-menuitem-icon,
:host ::ng-deep .collapsed #left-panel #nav-menu .p-panelmenu-panel:has(.p-panelmenu-item-link-active) .p-panelmenu-header .p-menuitem-icon {
  color: #1D469E;
}
/* Hide submenu chevrons when collapsed */
:host ::ng-deep .collapsed #left-panel #nav-menu chevronrighticon,
:host ::ng-deep .collapsed #left-panel #nav-menu chevrondownicon {
  display: none;
}

:host ::ng-deep .collapsed #left-panel #toggle-left-panel {
  color: #ffffff;
}

//thêm z-index cho togglee-left để nổi lên trên các form
:host ::ng-deep #left-panel #toggle-left-panel {
  position: fixed !important;
  left: 252px !important; 
  top: 60px !important;
  z-index: 4000 !important; 
}

:host ::ng-deep .collapsed #left-panel #toggle-left-panel {
  left: 57px !important;
}

/* Root layout height extracted from inline */
.layout-root {
  height: 100vh;
  overflow-x: hidden;
}

/* Header flex container extracted from inline */
#right-panel #right-panel-header .header-flex {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
}

/* Move p-toast z-index from inline to stylesheet */
:host ::ng-deep p-toast[key="global"] {
  z-index: 2222 !important;
}
